<!DOCTYPE html><html lang="en" data-page="blogs" class="astro-site"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>MH-Documentation | Akhil Chowdary</title><!-- Add base path meta tag for GitHub Pages deployment --><meta name="base-path" content="/"><!-- Theme preload CSS --><link rel="stylesheet" href="/styles/theme-preload.css"><!-- Theme preload script must be loaded inline for immediate execution --><script>
    // Immediately apply theme from localStorage to prevent flashing
    (function() {
        const savedTheme = localStorage.getItem('theme');
        
        // If we have a saved preference, use it
        if (savedTheme === 'dark') {
            document.documentElement.classList.add('dark-theme');
            // Create a style element to apply dark-theme to body immediately
            const style = document.createElement('style');
            style.textContent = 'body { background-color: var(--dark-bg-color); color: var(--dark-primary-white); }';
            document.head.appendChild(style);
        } 
        // If no saved preference, check system preference
        else if (savedTheme === null && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark-theme');
            // Create a style element to apply dark-theme to body immediately
            const style = document.createElement('style');
            style.textContent = 'body { background-color: var(--dark-bg-color); color: var(--dark-primary-white); }';
            document.head.appendChild(style);
        }
        
        // Re-enable transitions after the initial load is complete
        window.addEventListener('DOMContentLoaded', function() {
            // Add a slight delay before enabling transitions
            setTimeout(function() {
                document.documentElement.classList.add('transitions-enabled');
            }, 100);
        });
    })();
  </script><!-- Critical full-screen styling for content pages --><style>
      /* Ensure content pages are full screen */
      .content-page-window {
          width: 100vw !important;
          height: 100vh !important;
          max-width: 100vw !important;
          max-height: 100vh !important;
          border-radius: 0 !important;
      }
      
      /* Ensure home page is windowed */
      body:not(.content-page) .portfolio-window {
          width: var(--container-width);
          height: var(--container-height);
          max-width: var(--container-max-width);
          max-height: var(--container-max-height);
          border-radius: 6px;
      }
    </style><!-- Font preload --><link rel="stylesheet" href="https://use.typekit.net/llo2eru.css"><link rel="stylesheet" href="/styles/styles.css"><!-- Page-specific CSS --><link rel="stylesheet" href="/styles/blog.css"><!-- EmailJS Library (only load on contact page) --><!-- For blog pages, include marked.js --><script src="/scripts/marked.min.js"></script><style>.featured-posts[data-astro-cid-7jjqptxk]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:var(--spacing-md);margin-top:var(--spacing-lg)}.featured-post[data-astro-cid-7jjqptxk]{padding:var(--spacing-md);background-color:var(--surface-secondary);border:var(--border-field)}.featured-post[data-astro-cid-7jjqptxk] h3[data-astro-cid-7jjqptxk]{margin-top:0;margin-bottom:var(--spacing-sm);font-family:MillenniumBold,serif}.post-link[data-astro-cid-7jjqptxk]{color:var(--text-link);text-decoration:underline;font-family:MSSerif,serif}.blog-welcome[data-astro-cid-7jjqptxk]{padding:var(--spacing-lg)}.blog-welcome[data-astro-cid-7jjqptxk] h1[data-astro-cid-7jjqptxk]{margin-bottom:var(--spacing-md);font-family:MillenniumBold,serif}.blog-post-content[data-astro-cid-7jjqptxk]{font-family:MSSerif,serif;line-height:1.5;color:var(--text-color);padding:var(--spacing-lg)}.blog-post-content[data-astro-cid-7jjqptxk] h1[data-astro-cid-7jjqptxk]{font-size:1.8em;margin-bottom:1em;font-family:MillenniumBold,serif}.blog-post-content[data-astro-cid-7jjqptxk] h2[data-astro-cid-7jjqptxk]{font-size:1.5em;margin-top:1.5em;margin-bottom:.75em;font-family:MillenniumBold,serif}.blog-post-content[data-astro-cid-7jjqptxk] h3[data-astro-cid-7jjqptxk]{font-size:1.2em;margin-top:1.2em;margin-bottom:.6em}.blog-post-content[data-astro-cid-7jjqptxk] p[data-astro-cid-7jjqptxk]{margin-bottom:1em}.blog-post-content[data-astro-cid-7jjqptxk] ul[data-astro-cid-7jjqptxk],.blog-post-content[data-astro-cid-7jjqptxk] ol[data-astro-cid-7jjqptxk]{margin-bottom:1em;padding-left:2em}.blog-post-content[data-astro-cid-7jjqptxk] li[data-astro-cid-7jjqptxk]{margin-bottom:.5em}.blog-post-content[data-astro-cid-7jjqptxk] img[data-astro-cid-7jjqptxk]{max-width:100%;border:1px solid var(--button-shadow);padding:2px;background-color:var(--surface)}.blog-post-content[data-astro-cid-7jjqptxk] a[data-astro-cid-7jjqptxk]{color:var(--text-link);text-decoration:underline}.blog-post-content[data-astro-cid-7jjqptxk] code[data-astro-cid-7jjqptxk]{font-family:monospace;background-color:var(--surface-secondary);padding:2px 4px;border:1px solid var(--button-shadow)}.blog-post-content[data-astro-cid-7jjqptxk] pre[data-astro-cid-7jjqptxk]{background-color:var(--surface-secondary);padding:1em;overflow-x:auto;border:1px solid var(--button-shadow);margin-bottom:1em}.blog-post-content[data-astro-cid-7jjqptxk] blockquote[data-astro-cid-7jjqptxk]{border-left:4px solid var(--button-shadow);padding-left:1em;margin-left:0;margin-bottom:1em;font-style:italic}.blog-error[data-astro-cid-7jjqptxk]{text-align:center;padding:2em}.blog-navigation[data-astro-cid-7jjqptxk]{display:block;margin-top:40px;padding-top:20px;border-top:1px solid var(--button-shadow)}.blog-nav-buttons[data-astro-cid-7jjqptxk]{display:flex;justify-content:space-between;padding:0 20px}.nav-button[data-astro-cid-7jjqptxk]{display:inline-block;padding:6px 20px;background-color:var(--surface);border-left:2px solid #fff;border-top:2px solid #fff;border-right:2px solid #848484;border-bottom:2px solid #848484;color:var(--text-color);text-decoration:none;font-family:MSSerif,serif;font-size:14px;text-align:center;min-width:120px;cursor:pointer}.nav-button[data-astro-cid-7jjqptxk]:hover{background-color:var(--surface-hover)}.nav-button[data-astro-cid-7jjqptxk]:active{border-left:2px solid #848484;border-top:2px solid #848484;border-right:2px solid #fff;border-bottom:2px solid #fff}.nav-button-placeholder[data-astro-cid-7jjqptxk]{display:inline-block;min-width:120px}.blog-tree-file.active .file-link{background-color:var(--selection-color);font-weight:700}
</style><script type="module">document.addEventListener("DOMContentLoaded",async function(){try{window.Components&&window.Components.showWindowTitleBar&&window.Components.showWindowTitleBar();const e=document.querySelector(".sidebar-toggle"),t=document.querySelector(".blog-container");if(e&&t&&(localStorage.getItem("blog_visited")!=="true"&&(e.classList.add("first-visit"),localStorage.setItem("blog_visited","true")),localStorage.getItem("blog_post_sidebar_state")?localStorage.getItem("blog_post_sidebar_state")==="collapsed"?(t.classList.add("sidebar-collapsed"),e.classList.add("collapsed")):(t.classList.remove("sidebar-collapsed"),e.classList.remove("collapsed")):localStorage.setItem("blog_post_sidebar_state","expanded"),e.addEventListener("click",()=>{t.classList.toggle("sidebar-collapsed"),e.classList.toggle("collapsed");const i=t.classList.contains("sidebar-collapsed");localStorage.setItem("blog_post_sidebar_state",i?"collapsed":"expanded")})),window.BlogLoader){const r=window.location.pathname.replace("/blog/","");window.BlogLoader.init({blogDataUrl:"/data/blogs.json",blogTreeContainer:".blog-tree",sidebarToggle:".sidebar-toggle",markdownBasePath:"/blogs/",onItemClick:function(l,o){if(o&&o.preventDefault(),l&&l.type==="file"){let a=l.path.replace(/\.md$/,"");return window.location.href=`/blog/${a}`,!0}return!1}}),setTimeout(()=>{document.querySelectorAll(".blog-tree-file .file-link").forEach(o=>{const a=o.getAttribute("href");if(a&&a===`/blog/${r}`){o.closest(".blog-tree-file").classList.add("active");let s=o.closest(".blog-tree-file").parentElement;for(;s;)s.classList.contains("blog-tree-folder")&&s.classList.add("expanded"),s=s.parentElement;setTimeout(()=>{o.scrollIntoView({behavior:"smooth",block:"center"})},300)}})},500)}}catch(e){console.error("Error initializing blog interface:",e);const t=document.getElementById("error-message");t&&(t.innerHTML=`
          <div class="error-box">
            Failed to initialize blog interface: ${e.message}
          </div>
        `)}});
</script></head> <body class="content-page"> <div class="portfolio-container"> <div class="window portfolio-window content-page-window"> <!-- Window header with proper structure to match original --> <div class="window-titlebar active"> <div class="window-titlebar-icon"></div> <div class="window-titlebar-text">Blogs</div> <div class="window-controls"> <button class="window-control window-minimize">_</button> <button class="window-control window-maximize">□</button> <button class="window-control window-close">×</button> </div> </div> <div class="window-content"> <!-- Page content is inserted here -->  <div class="content-area blog-page-container" data-astro-cid-7jjqptxk> <!-- Main navigation styled exactly like in the screenshot --> <div class="main-nav" data-astro-cid-7jjqptxk> <a href="/" data-astro-cid-7jjqptxk>HOME</a> <a href="/about" data-astro-cid-7jjqptxk>ABOUT</a> <a href="/experience" data-astro-cid-7jjqptxk>EXPERIENCE</a> <a href="/projects" data-astro-cid-7jjqptxk>PROJECTS</a> <a href="/blogs" class="active-page" data-astro-cid-7jjqptxk>BLOG</a> <a href="/contact" data-astro-cid-7jjqptxk>CONTACT</a> </div> <div class="section-header" data-astro-cid-7jjqptxk> <h2 data-astro-cid-7jjqptxk>MH-Documentation</h2> </div> <!-- Error message placeholder --> <div id="error-message" data-astro-cid-7jjqptxk></div> <div class="blog-container" data-astro-cid-7jjqptxk> <!-- Toggle button moved out of both sidebar and main content --> <button class="sidebar-toggle" aria-label="Toggle sidebar" title="Toggle sidebar visibility" data-astro-cid-7jjqptxk></button> <div class="blog-sidebar" data-astro-cid-7jjqptxk> <div class="sidebar-header" data-astro-cid-7jjqptxk> <span class="sidebar-title" data-astro-cid-7jjqptxk>Content</span> </div> <div class="blog-tree" data-astro-cid-7jjqptxk> <!-- Blog tree will be dynamically generated --> <div class="loading-indicator" data-astro-cid-7jjqptxk>Loading blog structure...</div> </div> </div> <div class="blog-main" data-astro-cid-7jjqptxk> <div class="blog-content" data-astro-cid-7jjqptxk> <div class="blog-post-content" data-astro-cid-7jjqptxk><h1>MH DOCUMENTATION (KVB)</h1>
<h2>Table of Contents</h2>
<ol>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#system-architecture">System Architecture</a></li>
<li><a href="#core-components">Core Components</a></li>
<li><a href="#data-models">Data Models</a></li>
<li><a href="#workflow-processes">Workflow Processes</a></li>
<li><a href="#integration-points">Integration Points</a></li>
<li><a href="#security-mechanisms">Security Mechanisms</a></li>
<li><a href="#utility-functions">Utility Functions</a></li>
<li><a href="#error-handling">Error Handling</a></li>
<li><a href="#testing-framework">Testing Framework</a></li>
<li><a href="#configuration-management">Configuration Management</a></li>
<li><a href="#file-by-file-analysis">File-by-File Analysis</a></li>
<li><a href="#common-scenarios-and-solutions">Common Scenarios and Solutions</a></li>
<li><a href="#troubleshooting-guide">Troubleshooting Guide</a></li>
<li><a href="#developer-quick-reference">Developer Quick Reference</a></li>
<li><a href="#appendices">Appendices</a></li>
</ol>
<h2>Introduction</h2>
<p>The Messaging Hub (MH) is a Java-based banking integration platform developed by Polaris Software Labs Limited (now Intellect Design Arena). This system serves as a middleware solution that facilitates the exchange of financial data between various banking systems, handling file processing, data validation, transformation, and secure transmission.</p>
<h3>Purpose</h3>
<p>The MH framework is designed to process various types of banking files and messages such as NEFT, RTGS, EFT, and other financial transactions. It provides a comprehensive framework for:</p>
<ul>
<li>Receiving and processing incoming files from external systems</li>
<li>Validating file formats, structures, and checksums</li>
<li>Processing financial data according to business rules</li>
<li>Generating outgoing files for external systems</li>
<li>Maintaining audit trails and error logs</li>
<li>Secure transmission and storage of financial data</li>
</ul>
<h3>Scope</h3>
<p>This documentation covers the entire codebase, including:</p>
<ul>
<li>Core file processing framework</li>
<li>Data models and structures</li>
<li>Workflow processes</li>
<li>Integration mechanisms</li>
<li>Security implementations</li>
<li>Utility functions</li>
<li>Error handling mechanisms</li>
<li>Testing approaches</li>
</ul>
<h3>System Overview Diagram</h3>
<pre><code>┌─────────────────┐     ┌──────────────────┐     ┌───────────────────┐
│                 │     │                  │     │                   │
│ External System │────▶│ Messaging Hub    │────▶│ Core Banking      │
│ (Source)        │     │ (MH)             │     │ System            │
│                 │     │                  │     │                   │
└─────────────────┘     └──────────────────┘     └───────────────────┘
                               │   ▲
                               │   │
                               ▼   │
┌─────────────────┐     ┌──────────────────┐     ┌───────────────────┐
│                 │     │                  │     │                   │
│ Database        │◀───▶│ File Systems     │     │ Other Banking     │
│ (Oracle)        │     │ (Input/Output)   │     │ Systems           │
│                 │     │                  │     │                   │
└─────────────────┘     └──────────────────┘     └───────────────────┘
</code></pre>
<h2>System Architecture</h2>
<h3>High-Level Architecture</h3>
<p>The system follows a modular architecture with clear separation of concerns:</p>
<ol>
<li><strong>Presentation Layer</strong>: Not explicitly present in the codebase as this is a middleware system</li>
<li><strong>Business Logic Layer</strong>: Contains the core processing logic<ul>
<li>File validation</li>
<li>Data transformation</li>
<li>Business rule application</li>
</ul>
</li>
<li><strong>Data Access Layer</strong>: Handles database operations</li>
<li><strong>Integration Layer</strong>: Manages communication with external systems</li>
<li><strong>Utility Layer</strong>: Provides common functionality across the system</li>
</ol>
<h3>Package Organization</h3>
<p>The system is organized into the following key packages:</p>
<pre><code>com.intellect.interfaces
├── common           # Constants and common definitions
├── dao              # Data Access Objects for database operations
├── exception        # Custom exceptions
├── file             # File-specific operations
├── fileProcess      # Core file processing logic
├── log              # Logging functionality
├── mail             # Email notification capabilities
├── message          # Message processing
├── util             # Utility classes
├── vo               # Value Objects (data models)
└── zipcrpt          # Zip and encryption utilities
</code></pre>
<h3>Key Design Patterns</h3>
<p>The codebase implements several design patterns:</p>
<ol>
<li><strong>Factory Pattern</strong>: Used in <code>FileProcessFatory.java</code> and <code>FileValidationFatory.java</code> to create appropriate implementations</li>
<li><strong>Abstract Factory Pattern</strong>: Used for creating related objects without specifying concrete classes</li>
<li><strong>Strategy Pattern</strong>: Different strategies for file processing, validation, and transformation</li>
<li><strong>Data Access Object (DAO)</strong>: Encapsulates database operations</li>
<li><strong>Value Object (VO)</strong>: Encapsulates data for transfer between layers</li>
<li><strong>Singleton Pattern</strong>: Used for database connections (FileProcessConnection)</li>
</ol>
<h2>Core Components</h2>
<h3>FileProcess.java</h3>
<p>The central component that orchestrates the entire file processing workflow.</p>
<p><strong>Key Responsibilities:</strong></p>
<ul>
<li>Receives incoming message/file information</li>
<li>Generates reference numbers for tracking</li>
<li>Inserts records into message_master table</li>
<li>Validates message format and structure</li>
<li>Updates processing status in database</li>
<li>Delegates to appropriate processing components</li>
<li>Handles error conditions and notifications</li>
</ul>
<p><strong>Workflow:</strong></p>
<ol>
<li>Generate or obtain a reference number</li>
<li>Insert details into message_master</li>
<li>Validate message format</li>
<li>Update message_master with validation results</li>
<li>Process the file/message content</li>
<li>Handle errors and update status</li>
<li>Generate notifications</li>
</ol>
<pre><code class="language-java">public void process(String msgTxt, String flow) throws FileProcessException {
    String uuid = UUID.randomUUID().toString();
    Calendar calC=Calendar.getInstance();
    String refNo=calC.get(Calendar.YEAR)+&quot;&quot;+calC.get(Calendar.DAY_OF_YEAR)+&quot;&quot;+calC.getTimeInMillis();
    MDC.put(&quot;CROSSMESSAGEREF&quot;, refNo);
    
    // Process message and handle workflow
    // ...
}
</code></pre>
<h3>FileProcessAbstract.java</h3>
<p>An abstract base class that defines the contract for file processing implementations.</p>
<p><strong>Key Features:</strong></p>
<ul>
<li>Defines abstract process method for specific implementations</li>
<li>Provides utility methods for notification handling</li>
<li>Manages error tracking and reporting</li>
</ul>
<pre><code class="language-java">public abstract class FileProcessAbstract {
    // Abstract method for implementing specific processing logic
    public abstract boolean process(MessageMasterVO messageMasterVO,
            FileMasterVO fileMasterVO, FeedConfigVO feedConfigVO)
            throws FileProcessException;
            
    // Common functionality for notification updates
    public boolean sendNotificationUpdate(MessageMasterVO messageMasterVO,
            FileMasterVO fileMasterVO, String errStr, boolean notificationStatus)
            throws FileProcessException {
        // Implementation for notification updates
        // ...
    }
}
</code></pre>
<h3>XML Processing (TeswtXMLReading.java)</h3>
<p>Handles XML parsing and processing, particularly for customer facility limits.</p>
<p><strong>Key Functionality:</strong></p>
<ul>
<li>Parses SOAP XML responses</li>
<li>Extracts limit information</li>
<li>Builds hierarchical limit structures</li>
<li>Stores and retrieves limit data from database</li>
</ul>
<pre><code class="language-java">public String getLimitData(String xml) {
    StringBuffer strb = new StringBuffer();
    try {
        // Parse XML data
        ArrayList&lt;LimitTreeVO&gt; arrList = parseLimitTreeData(xml);
        
        // Process and store data
        // ...
        
        // Format and return results
        // ...
    } catch (Exception e) {
        e.printStackTrace();
    }
    return strb.toString();
}
</code></pre>
<h3>File Validation Framework</h3>
<p>The system includes a comprehensive validation framework for files:</p>
<ul>
<li>Format validation</li>
<li>Structure validation</li>
<li>Checksum verification</li>
<li>Encryption validation</li>
<li>Business rule validation</li>
</ul>
<h2>Data Models</h2>
<h3>Value Objects (VO)</h3>
<p>The system uses Value Objects to encapsulate data and transfer it between layers.</p>
<h4>FileMasterVO.java</h4>
<p>Represents information about a file being processed.</p>
<p><strong>Key Properties:</strong></p>
<ul>
<li>File name and path</li>
<li>Processing status</li>
<li>Record counts (total, success, failed)</li>
<li>Error information</li>
<li>Bank reference ID</li>
<li>Feed name and type</li>
</ul>
<pre><code class="language-java">public class FileMasterVO {
    private String fileName;
    private String dirName;
    private String fileProcessStatus;
    private String bankReferenceId;
    private String feedName;
    private String feedType;
    private String totalRecords;
    private String successRecords;
    private String failedRecords;
    // Additional properties and methods
    // ...
}
</code></pre>
<h4>MessageMasterVO.java</h4>
<p>Represents a message being processed through the system.</p>
<p><strong>Key Properties:</strong></p>
<ul>
<li>Message reference ID</li>
<li>Message text</li>
<li>Flow direction</li>
<li>Validation status</li>
<li>Feed configuration</li>
</ul>
<h4>FeedConfigVO.java</h4>
<p>Contains configuration for different feed types.</p>
<p><strong>Key Properties:</strong></p>
<ul>
<li>Feed name</li>
<li>Validation rules</li>
<li>Processing parameters</li>
<li>Checksum configurations</li>
<li>Encryption settings</li>
</ul>
<h4>LimitTreeVO.java</h4>
<p>Represents a node in the customer limit hierarchy.</p>
<p><strong>Key Properties:</strong></p>
<ul>
<li>Customer ID (CIF)</li>
<li>Facility ID</li>
<li>Limit amount</li>
<li>Utilized amount</li>
<li>Parent and current reference codes</li>
<li>Start and expiry dates</li>
</ul>
<h3>Graph and Node Implementation</h3>
<p>For processing hierarchical data structures like limit trees, the system implements a graph data structure:</p>
<h4>Node.java</h4>
<pre><code class="language-java">public class Node {
    private String id;
    private String parent;
    private boolean isVisted=false;
    public List&lt;Node&gt; adjacentNodes=new LinkedList&lt;Node&gt;();
    
    // Getters and setters
    // ...
    
    public void addAdjacentNodes(Node temp) {
        adjacentNodes.add(temp);
    }
}
</code></pre>
<h4>Graph.java</h4>
<pre><code class="language-java">public class Graph {
    private HashMap&lt;String,Node&gt; hs=new HashMap&lt;String,Node&gt;();
    
    public Node getNode(String temp) {
        if(hs.containsKey(temp)) {
            return hs.get(temp);
        }
        Node newNode=new Node();
        hs.put(temp, newNode);
        return newNode;
    }
    
    public void breadthFirstTraversal(Node rootNode) {
        Queue&lt;Node&gt; q = new LinkedList&lt;Node&gt;();
        q.add(rootNode);
        rootNode.setVisted(true);
        while(!q.isEmpty()) {
            Node n = (Node)q.poll();
            // Process node
            // ...
            for(Node adj : n.adjacentNodes) {
                if(!adj.isVisted()) {
                    adj.setVisted(true);
                    q.add(adj);
                }
            }
        }
    }
}
</code></pre>
<h2>Workflow Processes</h2>
<h3>Incoming File Processing</h3>
<ol>
<li><p><strong>Message Receipt</strong></p>
<ul>
<li>System receives a message with file information</li>
<li>Format: <code>hdr_Tran_Id=&lt;FEED_NAME&gt;~*hdr_Status=NULL~*FEED|&lt;REFERENCE&gt;||&lt;FEED_NAME&gt;||&lt;FILE_NAME&gt;|&lt;DIRECTORY&gt;|</code></li>
</ul>
</li>
<li><p><strong>Message Validation</strong></p>
<ul>
<li>Validate message format</li>
<li>Check for feed configuration in database</li>
<li>Verify required parameters</li>
</ul>
</li>
<li><p><strong>File Validation</strong></p>
<ul>
<li>Verify file exists in specified location</li>
<li>Check file format and structure</li>
<li>Validate checksum if configured</li>
<li>Decrypt file if encrypted</li>
</ul>
</li>
<li><p><strong>File Processing</strong></p>
<ul>
<li>Parse file content</li>
<li>Apply business rules</li>
<li>Extract and transform data</li>
</ul>
</li>
<li><p><strong>Status Update</strong></p>
<ul>
<li>Update file_master and message_master tables</li>
<li>Generate status file if configured</li>
<li>Send notifications if configured</li>
</ul>
</li>
<li><p><strong>Error Handling</strong></p>
<ul>
<li>Log errors to database</li>
<li>Generate error notifications</li>
<li>Update file status</li>
</ul>
</li>
</ol>
<h3>Limit Tree Processing</h3>
<ol>
<li><p><strong>XML Receipt</strong></p>
<ul>
<li>System receives an XML message with limit information</li>
</ul>
</li>
<li><p><strong>XML Parsing</strong></p>
<ul>
<li>Parse SOAP envelope</li>
<li>Extract limit data elements</li>
</ul>
</li>
<li><p><strong>Hierarchical Processing</strong></p>
<ul>
<li>Build limit tree structure</li>
<li>Determine parent-child relationships</li>
</ul>
</li>
<li><p><strong>Database Storage</strong></p>
<ul>
<li>Store limit information in database</li>
<li>Maintain hierarchical relationships</li>
</ul>
</li>
<li><p><strong>Retrieval and Formatting</strong></p>
<ul>
<li>Retrieve limit information by CIF and facility ID</li>
<li>Format data for consumption by other systems</li>
</ul>
</li>
</ol>
<h3>Sequence Diagram for Incoming File Processing</h3>
<pre><code>Client                 FileProcess           MessageValidation       FileValidation       DAO
  |                        |                       |                      |                |
  |--process(msgTxt,flow)--|                       |                      |                |
  |                        |--getRefNumber()-------|----------------------|---------------&gt;|
  |                        |&lt;-reference number-----|----------------------|----------------|
  |                        |--insertMessageMaster()|----------------------|---------------&gt;|
  |                        |&lt;-success--------------|----------------------|----------------|
  |                        |--validateMessage()----&gt;                      |                |
  |                        |                       |--validation----------&gt;                |
  |                        |&lt;-validation results---|                      |                |
  |                        |--updateMessageMaster()|----------------------|---------------&gt;|
  |                        |&lt;-update success-------|----------------------|----------------|
  |                        |--validateFile()-------|----------------------&gt;                |
  |                        |                                              |--validation---&gt;|
  |                        |&lt;-validation results-----------------------------|              |
  |                        |--process file---------|----------------------|---------------&gt;|
  |                        |&lt;-processing results---|----------------------|----------------|
  |&lt;-process complete------|                       |                      |                |
</code></pre>
<h2>Integration Points</h2>
<h3>Database Integration</h3>
<p>The system uses JDBC for database operations, primarily through the <code>FileProcessDAO</code> class.</p>
<p><strong>Key Database Tables:</strong></p>
<ul>
<li><strong>message_master</strong>: Stores message processing details</li>
<li><strong>file_master</strong>: Stores file processing information</li>
<li><strong>feed_config</strong>: Contains configuration for different feed types</li>
<li><strong>LIMIT_TREE_RESPONSE</strong>: Stores hierarchical limit data</li>
</ul>
<h3>External System Integration</h3>
<h4>Web Service Integration</h4>
<p>Integration with SOAP web services, as seen in the <code>TeswtXMLReading.java</code> class for retrieving customer facility limits:</p>
<pre><code class="language-java">private String callIntegLimit(String cif, String faciltyId, String unitId) throws Exception {
    try {
        // Set up JNDI context
        String contextFactory = rsBundlemain.getString(&quot;CONTEXTFACTORY&quot;);
        String providURL = rsBundlemain.getString(&quot;PROVIDER_URL&quot;);
        Context jndiContext = null;
        
        Properties properties = new Properties();
        properties.put(Context.INITIAL_CONTEXT_FACTORY, contextFactory);
        properties.put(Context.PROVIDER_URL, providURL);
        jndiContext = new InitialContext(properties);

        // Look up EJB
        TreControlHome treHome;
        TreControlRemote treRemote;
        treHome = (TreControlHome) jndiContext.lookup(&quot;CONTROL&quot;);
        treRemote = (TreControlRemote) treHome.create();
        
        // Prepare and send message
        String nvpMessage = rsBundlemain.getString(&quot;LIMIT_INQ&quot;);
        nvpMessage = nvpMessage.replace(&quot;#UNITID#&quot;, unitId);
        nvpMessage = nvpMessage.replace(&quot;#CIF#&quot;, cif);
        nvpMessage = nvpMessage.replace(&quot;#FACILITYID#&quot;, faciltyId);
        
        // Process response
        String result = treRemote.treMain(nvpMessage);
        // ...
    } catch (Exception e) {
        throw e;
    }
}
</code></pre>
<h4>File-Based Integration</h4>
<p>The system processes files in various formats from external systems:</p>
<ul>
<li>Fixed-width files</li>
<li>Delimited files (CSV, pipe-delimited)</li>
<li>XML files</li>
<li>Encrypted files</li>
</ul>
<h2>Security Mechanisms</h2>
<h3>Encryption and Decryption</h3>
<p>The system supports multiple encryption algorithms:</p>
<h4>Triple DES Implementation</h4>
<pre><code class="language-java">public class TripleDES {
    private static final String KEY_STRING = &quot;167-42-158-164-248-173-50-74-193-73-82-185-76-145-247-188-167-42-158-164-248-173-50-74&quot;;

    public String encrypt(String source) {
        try {
            // Get our secret key
            Key key = getKey();

            // Create the cipher
            Cipher desCipher = Cipher.getInstance(&quot;DESede&quot;);

            // Initialize the cipher for encryption
            desCipher.init(Cipher.ENCRYPT_MODE, key);

            // Our cleartext as bytes
            byte[] cleartext = source.getBytes();

            // Encrypt the cleartext
            byte[] ciphertext = desCipher.doFinal(cleartext);

            // Return a String representation of the cipher text
            return getString(ciphertext);
        } catch (Exception e) {
            // Error handling
        }
        return null;
    }
    
    public String decrypt(String source) {
        // Decryption implementation
        // ...
    }
}
</code></pre>
<h3>Checksum Validation</h3>
<p>The system supports various checksum algorithms (MD5, SHA) and formats:</p>
<ul>
<li>First line of file</li>
<li>Last line of file</li>
<li>In header file</li>
<li>In trailer file</li>
<li>In message body</li>
</ul>
<pre><code class="language-java">public boolean checkSumCheck(MessageMasterVO messageMasterVO,
        FileMasterVO fileMasterVO, FeedConfigVO feedConfigVO) {
    // Implementation for checksum validation
    // ...
}
</code></pre>
<h2>Utility Functions</h2>
<h3>File Processing Utilities</h3>
<p>The <code>FileProcessUtil</code> class provides common functionality for file operations:</p>
<ul>
<li>File existence checks</li>
<li>Directory creation</li>
<li>File reading and writing</li>
<li>File movement</li>
<li>Checksum generation and validation</li>
<li>Encryption and decryption</li>
</ul>
<h3>XML Processing Utilities</h3>
<p>The system includes utilities for XML processing:</p>
<pre><code class="language-java">private org.w3c.dom.Document getXMLDocument(String p_inputXml)
        throws SAXNotRecognizedException, SAXNotSupportedException,
        SAXException, IOException {
    StringReader sreader = new StringReader(p_inputXml);
    InputSource is = new InputSource(sreader);
    DOMParser parser = new DOMParser();
    parser.setFeature(&quot;http://apache.org/xml/features/validation/dynamic&quot;, true);
    parser.setFeature(&quot;http://apache.org/xml/features/dom/include-ignorable-whitespace&quot;, false);

    try {
        parser.parse(is);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return parser.getDocument();
}
</code></pre>
<h2>Error Handling</h2>
<p>The system implements a comprehensive error handling mechanism using custom exceptions and error logging.</p>
<h3>Custom Exceptions</h3>
<p>The <code>FileProcessException</code> class extends Exception and includes additional fields for error codes and detailed messages:</p>
<pre><code class="language-java">public class FileProcessException extends Exception {
    private int errorCode;
    private String errorMessage;
    
    public FileProcessException(String message, int errorCd) {
        super(message);
        this.errorMessage = message;
        this.errorCode = errorCd;
    }
    
    public FileProcessException(String message, int errorCd, Throwable cause) {
        super(message, cause);
        this.errorMessage = message;
        this.errorCode = errorCd;
    }
    
    // Getters for error code and message
    // ...
}
</code></pre>
<h3>Error Constants</h3>
<p>Error codes and messages are defined in the <code>FileProcessErrorConstants</code> class:</p>
<pre><code class="language-java">public class FileProcessErrorConstants {
    public static final int EXCEPTION_CODE = 999;
    public static final int EXCEPTION_CODE_SQL = 998;
    public static final int ERROR_CODE_MESSAGE_EMPTY = 100;
    public static final int ERROR_CODE_MESSAGE_FORMAT = 101;
    public static final int ERROR_CODE_FEED_MAINTENANCE = 102;
    // Additional error codes and messages
    // ...
}
</code></pre>
<h3>Error Logging</h3>
<p>Errors are logged to both log files and the database:</p>
<pre><code class="language-java">public void insertErrorTab(ErrorVO errorVO) throws FileProcessException {
    // Implementation for inserting error details into database
    // ...
}
</code></pre>
<h2>Testing Framework</h2>
<p>The codebase includes test classes for various components:</p>
<h3>TestFileProcess.java</h3>
<p>Tests the end-to-end file processing workflow:</p>
<pre><code class="language-java">public static void testFullFlow() {
    try {
        FileProcess fp = new FileProcess();
        fp.process(
                &quot;hdr_Tran_Id=BILLREG_XLS_IN~*hdr_Status=NULL~*FEED|BILLREG29052019001|BILLREG29052019001|BILLREG_XLS_IN|S|PDG11_BILLREG_IN_1605201900001.xls|/usr1/SIR11784/GTB_HOME/INTERFACE_HOME/BILLREG_XLS_IN/incoming/||003&quot;,
                &quot;I&quot;);
    } catch (Exception e) {
        e.printStackTrace();
    }
}
</code></pre>
<h3>Test Cases for Checksum Validation</h3>
<pre><code class="language-java">public static void testChecksum() {
    FileProcessUtil fu = new FileProcessUtil();
    try {
        MessageMasterVO messageMasterVO = new MessageMasterVO();
        FileMasterVO fileMasterVO = new FileMasterVO();
        FeedConfigVO feedConfigVO = new FeedConfigVO();
        feedConfigVO.setCheckSumValdationRequired(&quot;Y&quot;);

        messageMasterVO.setDirName(&quot;D:\\Intellect\\Interface\\2_IDFC\\CTS\\testing\\&quot;);
        fileMasterVO.setDirName(&quot;D:\\Intellect\\Interface\\2_IDFC\\CTS\\testing\\&quot;);

        feedConfigVO.setCheckSumAlgoritham(&quot;MD5&quot;);
        feedConfigVO.setCheckSumPrefix(&quot;CHECKSUM|&quot;);

        System.out.println(&quot;check sum inside first line of file&quot;);
        feedConfigVO.setCheckSumAvalible(&quot;LAST_LINE_WITH_PREFIX&quot;);
        fileMasterVO.setFileName(&quot;ALL_BANK_MICR_28102018_01.txt&quot;);
        System.out.println(fu.checkSumCheck(messageMasterVO, fileMasterVO, feedConfigVO));
    } catch (Exception e) {
        System.out.println(&quot;Exception in process &quot; + e.getMessage());
    }
}
</code></pre>
<h2>Configuration Management</h2>
<p>The system uses resource bundles for configuration management:</p>
<pre><code class="language-java">public static ResourceBundle rsBundlemain = ResourceBundle.getBundle(AppConstants.APPLICATION);
</code></pre>
<h3>Key Configuration Properties</h3>
<ul>
<li>Database connection details</li>
<li>File paths and locations</li>
<li>Encryption keys and algorithms</li>
<li>Integration endpoints</li>
<li>Processing parameters</li>
</ul>
<h3>Database Configuration</h3>
<p>Feed-specific configurations are stored in the database, allowing for dynamic configuration without code changes.</p>
<h2>File-by-File Analysis</h2>
<p>This section provides a detailed analysis of each file in the Messaging Hub Financial Integration System, explaining its purpose, structure, and interactions with other components.</p>
<h3>Project Structure and Organization</h3>
<h4>Directory Structure</h4>
<p>The Messaging Hub Financial Integration System is organized into several key directories:</p>
<ul>
<li><p><strong>/IFileProcess</strong>: Main project directory</p>
<ul>
<li><strong>/bin</strong>: Compiled class files</li>
<li><strong>/src</strong>: Source code files<ul>
<li><strong>/com/intellect/interfaces</strong>: Core package structure</li>
</ul>
</li>
<li><strong>/META-INF</strong>: Metadata information and manifest</li>
<li><strong>/.settings</strong>: Eclipse IDE settings</li>
<li>Root files: <code>.classpath</code>, <code>.project</code>, and utility Java files</li>
</ul>
</li>
<li><p><strong>/InwardRemitFeedMDB</strong>: Module for handling inward remittance feeds</p>
<ul>
<li><strong>/ejbModule</strong>: Contains EJB implementations</li>
<li><strong>/build</strong>: Build artifacts</li>
<li><strong>/.settings</strong>: Module-specific settings</li>
</ul>
</li>
<li><p><strong>/MessageIncomingEJB</strong>: Module for handling incoming message processing</p>
<ul>
<li><strong>/ejbModule</strong>: Contains EJB implementations</li>
<li><strong>/build</strong>: Build artifacts</li>
<li><strong>/.settings</strong>: Module-specific settings</li>
</ul>
</li>
<li><p><strong>/Integratorplugins</strong>: Integration plugins module</p>
<ul>
<li><strong>/bin</strong>: Compiled classes </li>
<li><strong>/src</strong>: Plugin source code</li>
<li><strong>/Resources</strong>: Resource files for the plugins</li>
<li><strong>/.settings</strong>: Module-specific settings</li>
</ul>
</li>
</ul>
<h4>Package Organization</h4>
<p>The main functional code is organized into the following package hierarchy:</p>
<pre><code>com.intellect.interfaces
├── common           # Constants and definitions
├── dao              # Data Access Objects
├── exception        # Custom exceptions
├── file             # File operations
├── fileProcess      # Core processing
├── log              # Logging functionality
├── mail             # Email capabilities
├── message          # Message processing
├── util             # Utilities
├── vo               # Value Objects
└── zipcrpt          # Compression and encryption
</code></pre>
<h4>Dependency Management</h4>
<p>The project uses multiple external libraries, as seen in the <code>.classpath</code> file:</p>
<ul>
<li>Database connectivity: Oracle JDBC drivers</li>
<li>XML processing: Xerces</li>
<li>Encryption: Bouncy Castle</li>
<li>File processing: Apache POI for Excel, iText for PDF</li>
<li>Logging: Log4j</li>
<li>EJB: Java EE libraries</li>
<li>Remote connectivity: JSch for SSH</li>
<li>Image processing: JAI libraries</li>
</ul>
<h3>Core Processing Files</h3>
<h4>FileProcess.java</h4>
<p><strong>Location</strong>: <code>com.intellect.interfaces</code></p>
<p><strong>Purpose</strong>: Central orchestrator for all file processing operations.</p>
<p><strong>Key Components</strong>:</p>
<ul>
<li>Process method that handles incoming and outgoing files/messages</li>
<li>Integration with message validation, file validation, and processing components</li>
<li>Error handling mechanism</li>
<li>Status update and notification management</li>
</ul>
<p><strong>Interactions</strong>:</p>
<ul>
<li>Calls <code>FileProcessDAO</code> for database operations</li>
<li>Uses <code>MessageValidationInterface</code> for message validation</li>
<li>Uses <code>FileValidationInterface</code> for file validation</li>
<li>Delegates to specific implementations via <code>FileProcessAbstract</code></li>
</ul>
<p><strong>Workflow</strong>:</p>
<ol>
<li>Receives a message with file information</li>
<li>Generates a unique reference ID</li>
<li>Stores message details in the database</li>
<li>Validates the message format</li>
<li>Retrieves feed configuration</li>
<li>Validates the file</li>
<li>Processes the file based on feed type</li>
<li>Updates status and generates notifications</li>
<li>Handles any errors that occur during processing</li>
</ol>
<p><strong>Sample Usage</strong>:</p>
<pre><code class="language-java">FileProcess fp = new FileProcess();
fp.process(&quot;hdr_Tran_Id=ACCT_FEED~*hdr_Status=NULL~*FEED|CORE20131220212127||ACCT_FEED||ACCT_FEED_20140721120158|/path/to/file/|&quot;, &quot;I&quot;);
</code></pre>
<h4>FileProcessAbstract.java</h4>
<p><strong>Location</strong>: <code>com.intellect.interfaces</code></p>
<p><strong>Purpose</strong>: Abstract base class defining the contract for file processing implementations.</p>
<p><strong>Key Components</strong>:</p>
<ul>
<li>Abstract <code>process</code> method for implementing specific file processing logic</li>
<li>Concrete <code>sendNotificationUpdate</code> method for handling notifications</li>
<li>Error handling and tracing support</li>
</ul>
<p><strong>Implementation Details</strong>:</p>
<ul>
<li>Maintains error details in static <code>errTab</code> variable</li>
<li>Provides consistent notification updating across different implementations</li>
<li>Manages database updates for notification status</li>
<li>Uses a template method pattern for consistent processing</li>
</ul>
<p><strong>Method Signature</strong>:</p>
<pre><code class="language-java">public abstract boolean process(MessageMasterVO messageMasterVO, 
                               FileMasterVO fileMasterVO, 
                               FeedConfigVO feedConfigVO) 
                               throws FileProcessException;
</code></pre>
<h4>FileProcessFatory.java</h4>
<p><strong>Location</strong>: <code>com.intellect.interfaces</code></p>
<p><strong>Purpose</strong>: Factory class for creating appropriate file processing implementations.</p>
<p><strong>Implementation Details</strong>:</p>
<ul>
<li>Uses a static map to store and retrieve processor implementations</li>
<li>Creates processor instances based on feed type or processing requirements</li>
<li>Implements the Factory design pattern</li>
<li>Supports runtime determination of processor implementation</li>
</ul>
<p><strong>Key Method</strong>:</p>
<pre><code class="language-java">public static FileProcessAbstract getFileProcessor(String feedType) {
    // Returns appropriate implementation based on feed type
}
</code></pre>
<h3>Database Access Layer</h3>
<h4>FileProcessDAO.java</h4>
<p><strong>Location</strong>: <code>com.intellect.interfaces.dao</code></p>
<p><strong>Purpose</strong>: Data Access Object providing database operations for the file processing system.</p>
<p><strong>Key Functionality</strong>:</p>
<ul>
<li>Message and file record insertion</li>
<li>Status updates</li>
<li>Feed configuration retrieval</li>
<li>Error logging</li>
<li>Process date handling</li>
</ul>
<p><strong>Main Methods</strong>:</p>
<ul>
<li><code>getRefNumber()</code>: Retrieves a unique reference number</li>
<li><code>insertMessageMaster()</code>: Inserts message details into the database</li>
<li><code>updateMessageMaster()</code>: Updates message status</li>
<li><code>getFeedMaintenance()</code>: Retrieves feed configuration</li>
<li><code>insertFileMaster()</code>: Creates a new file record</li>
<li><code>updateFileMasterStatus()</code>: Updates file processing status</li>
<li><code>insertFileMasterTrace()</code>: Logs file processing trace</li>
</ul>
<h4>FileProcessConnection.java</h4>
<p><strong>Location</strong>: <code>com.intellect.interfaces.util</code></p>
<p><strong>Purpose</strong>: Singleton class for managing database connections.</p>
<p><strong>Implementation Details</strong>:</p>
<ul>
<li>Uses Singleton pattern for connection management</li>
<li>Handles connection pooling</li>
<li>Provides transaction support</li>
<li>Manages connection lifecycle</li>
</ul>
<h3>Data Models</h3>
<h4>FileMasterVO.java</h4>
<p><strong>Location</strong>: <code>com.intellect.interfaces.vo</code></p>
<p><strong>Purpose</strong>: Value Object representing a file being processed.</p>
<p><strong>Key Fields</strong>:</p>
<ul>
<li><code>fileName</code>: Name of the file being processed</li>
<li><code>dirName</code>: Directory path where the file is located</li>
<li><code>fileProcessStatus</code>: Current processing status</li>
<li><code>bankReferenceId</code>: Unique identifier for tracking</li>
<li><code>feedName</code>: Type of feed being processed</li>
<li><code>totalRecords</code>, <code>successRecords</code>, <code>failedRecords</code>: Processing statistics</li>
<li><code>errorRecord</code>, <code>errCode</code>, <code>errMsg</code>: Error details</li>
</ul>
<p><strong>Methods</strong>:</p>
<ul>
<li>Various getters and setters</li>
<li><code>isAbort()</code>: Determines if processing should be aborted</li>
<li><code>isFileProcessed()</code>: Checks if file has been already processed</li>
<li><code>isJobAbort()</code>: Checks if job was aborted</li>
</ul>
<p><strong>Status Codes</strong>:</p>
<ul>
<li><code>FILE_PROCESSSTATED</code> (1): Process started</li>
<li><code>FILE_PROCESSING</code> (2): Processing in progress</li>
<li><code>FILE_PROCESSED</code> (3): Processing completed</li>
<li><code>FILE_FILEREJECTED</code> (4): File rejected</li>
<li><code>FILE_STATUSFILEGENERATED</code> (5): Status file generated</li>
<li><code>FILE_NOTIFICATIONSEND</code> (6): Notification sent</li>
<li><code>FILE_NOTIFICATIONFAILED</code> (7): Notification failed</li>
<li><code>FILE_REDIRECTFAILED</code> (8): Redirect failed</li>
</ul>
<h4>MessageMasterVO.java</h4>
<p><strong>Location</strong>: <code>com.intellect.interfaces.vo</code></p>
<p><strong>Purpose</strong>: Value Object representing a message being processed.</p>
<p><strong>Key Fields</strong>:</p>
<ul>
<li><code>msgRefId</code>: Unique message reference ID</li>
<li><code>msgTxt</code>: Actual message text content</li>
<li><code>flow</code>: Direction of flow (inbound/outbound)</li>
<li><code>validMessage</code>: Flag indicating message validity</li>
<li><code>feedConfigVO</code>: Related feed configuration</li>
<li><code>feedName</code>: Feed identifier</li>
<li><code>fileName</code>: Associated file name</li>
<li><code>dirName</code>: Directory path</li>
<li><code>checkSum</code>: Checksum values</li>
</ul>
<p><strong>Methods</strong>:</p>
<ul>
<li>Data access getters and setters</li>
<li>Validation status methods</li>
<li>Type determination methods (isFeed, isRequest, etc.)</li>
</ul>
<h4>FeedConfigVO.java</h4>
<p><strong>Location</strong>: <code>com.intellect.interfaces.vo</code></p>
<p><strong>Purpose</strong>: Configuration parameters for different feed types.</p>
<p><strong>Key Fields</strong>:</p>
<ul>
<li><code>feedName</code>: Feed identifier</li>
<li><code>fileNameValidationReqd</code>: File name validation flag</li>
<li><code>fileNameRegEx</code>: Regular expression for file name validation</li>
<li><code>dirPath</code>: Directory path for the feed</li>
<li><code>checkSumValdationRequired</code>: Checksum validation flag</li>
<li><code>checkSumAlgoritham</code>: Checksum algorithm (MD5, SHA, etc.)</li>
<li><code>checkSumAvalible</code>: Checksum location in file</li>
<li><code>fileCryptoValidationRequired</code>: Encryption flag</li>
<li><code>fileCryptoAlgorithm</code>: Encryption algorithm</li>
<li><code>invokeDuring</code>: Execution timing</li>
</ul>
<h4>LimitTreeVO.java</h4>
<p><strong>Location</strong>: <code>com.intellect.interfaces.vo</code></p>
<p><strong>Purpose</strong>: Value Object for customer facility limits in hierarchical structure.</p>
<p><strong>Key Fields</strong>:</p>
<ul>
<li><code>cif</code>: Customer Information File ID</li>
<li><code>facilityId</code>: Facility identifier</li>
<li><code>lmtAmt</code>: Limit amount</li>
<li><code>utilizedAmt</code>: Utilized amount</li>
<li><code>prntRfCd</code>: Parent reference code</li>
<li><code>crntRfCd</code>: Current reference code</li>
<li><code>startDate</code>, <code>expityDate</code>: Validity period</li>
<li><code>lbl</code>: Label for the limit</li>
<li><code>level</code>: Level in hierarchy</li>
</ul>
<h3>Graph and Node Implementation</h3>
<h4>Node.java</h4>
<p><strong>Location</strong>: Root package</p>
<p><strong>Purpose</strong>: Represents a node in a graph data structure, used for hierarchical data processing.</p>
<p><strong>Key Components</strong>:</p>
<ul>
<li><code>id</code>: Node identifier</li>
<li><code>parent</code>: Parent node identifier</li>
<li><code>isVisted</code>: Flag for traversal algorithms</li>
<li><code>adjacentNodes</code>: List of connected nodes</li>
</ul>
<p><strong>Methods</strong>:</p>
<ul>
<li><code>addAdjacentNodes()</code>: Adds a node to the adjacency list</li>
<li>Various getters and setters for node properties</li>
</ul>
<p><strong>Usage Context</strong>:</p>
<ul>
<li>Used primarily in limit tree processing</li>
<li>Implements a directed graph structure</li>
<li>Enables hierarchical data traversal</li>
</ul>
<p><strong>Implementation Details</strong>:</p>
<pre><code class="language-java">public class Node {
    private String id;
    private String parent;
    private boolean isVisted=false;
    public List&lt;Node&gt; adjacentNodes=new LinkedList&lt;Node&gt;();
    
    // Methods for node manipulation
    // ...
}
</code></pre>
<h4>Graph.java</h4>
<p><strong>Location</strong>: Root package</p>
<p><strong>Purpose</strong>: Graph implementation for hierarchical data processing.</p>
<p><strong>Key Components</strong>:</p>
<ul>
<li>HashMap storing nodes by their identifiers</li>
<li>Methods for node retrieval and creation</li>
<li>Breadth-first traversal implementation</li>
</ul>
<p><strong>Methods</strong>:</p>
<ul>
<li><code>getNode()</code>: Retrieves or creates a node</li>
<li><code>breadthFirstTraversal()</code>: Implements BFS algorithm for graph traversal</li>
</ul>
<p><strong>BFS Implementation</strong>:</p>
<pre><code class="language-java">public void breadthFirstTraversal(Node rootNode) {
    Queue&lt;Node&gt; q = new LinkedList&lt;Node&gt;();
    q.add(rootNode);
    rootNode.setVisted(true);
    while(!q.isEmpty()) {
        Node n = q.poll();
        
        // Process node data
        System.out.println(&quot;Processing node: &quot; + n.getId());
        
        // Add child nodes to queue
        for(Node adj : n.adjacentNodes) {
            if(!adj.isVisted()) {
                adj.setVisted(true);
                q.add(adj);
            }
        }
    }
}
</code></pre>
<p><strong>Sample Usage</strong>:</p>
<pre><code class="language-java">Graph g = new Graph();
Node parent = g.getNode(&quot;parentId&quot;);
Node child = g.getNode(&quot;childId&quot;);
parent.setId(&quot;parentId&quot;);
child.setId(&quot;childId&quot;);
child.setParent(&quot;parentId&quot;);
parent.addAdjacentNodes(child);
g.breadthFirstTraversal(parent);
</code></pre>
<h3>XML Processing Files</h3>
<h4>TeswtXMLReading.java</h4>
<p><strong>Location</strong>: Root package</p>
<p><strong>Purpose</strong>: Handles XML parsing and processing, particularly for customer facility limits.</p>
<p><strong>Key Components</strong>:</p>
<ul>
<li>Methods for parsing SOAP XML responses</li>
<li>Database operations for storing and retrieving limit data</li>
<li>Hierarchical data processing using graph structures</li>
</ul>
<p><strong>Key Methods</strong>:</p>
<ul>
<li><code>getLimitData()</code>: Processes XML and extracts limit information</li>
<li><code>parseLimitTreeData()</code>: Parses XML into limit tree structure</li>
<li><code>getXMLDocument()</code>: Utility method for DOM parsing</li>
<li><code>insertLimitTree()</code>: Stores limit data in database</li>
<li><code>getLimitTreeData()</code>: Retrieves limit data from database</li>
</ul>
<p><strong>XML Processing Flow</strong>:</p>
<ol>
<li>Receive XML SOAP response</li>
<li>Parse XML document using DOMParser</li>
<li>Extract facility and customer information</li>
<li>Process additional facility details</li>
<li>Build hierarchical structure</li>
<li>Store in database with unique reference</li>
<li>Retrieve and format for downstream systems</li>
</ol>
<p><strong>Interactions</strong>:</p>
<ul>
<li>Uses <code>org.apache.xerces.parsers.DOMParser</code> for XML parsing</li>
<li>Calls database functions via <code>FileProcessConnection</code></li>
<li>References EJB interfaces for integration</li>
</ul>
<p><strong>XML Sample Processing</strong>:</p>
<pre><code class="language-java">Document d = getXMLDocument(xmlString);
NodeList nFcltyNb = d.getElementsByTagName(&quot;FcltyNb&quot;);
String strFcltyNb = nFcltyNb.item(0).getChildNodes().item(0).getNodeValue();
// Process additional nodes
// ...
</code></pre>
<h3>Security Implementation</h3>
<h4>TripleDES.java</h4>
<p><strong>Location</strong>: <code>src</code></p>
<p><strong>Purpose</strong>: Implements Triple DES encryption/decryption for secure data handling.</p>
<p><strong>Key Components</strong>:</p>
<ul>
<li>Fixed encryption key defined as byte array</li>
<li>Methods for encryption and decryption</li>
<li>Utility methods for byte array manipulation</li>
</ul>
<p><strong>Key String</strong>:</p>
<pre><code class="language-java">private static final String KEY_STRING = &quot;167-42-158-164-248-173-50-74-193-73-82-185-76-145-247-188-167-42-158-164-248-173-50-74&quot;;
</code></pre>
<p><strong>Methods</strong>:</p>
<ul>
<li><code>encrypt()</code>: Encrypts string data using Triple DES</li>
<li><code>decrypt()</code>: Decrypts encrypted data</li>
<li><code>getKey()</code>: Creates secret key from key string</li>
<li><code>getBytes()</code> and <code>getString()</code>: Conversion utilities</li>
</ul>
<p><strong>Encryption Implementation</strong>:</p>
<pre><code class="language-java">public String encrypt(String source) {
    try {
        // Get our secret key
        Key key = getKey();

        // Create the cipher
        Cipher desCipher = Cipher.getInstance(&quot;DESede&quot;);

        // Initialize the cipher for encryption
        desCipher.init(Cipher.ENCRYPT_MODE, key);

        // Our cleartext as bytes
        byte[] cleartext = source.getBytes();

        // Encrypt the cleartext
        byte[] ciphertext = desCipher.doFinal(cleartext);

        // Return a String representation of the cipher text
        return getString(ciphertext);
    } catch (Exception e) {
        // Error handling
    }
    return null;
}
</code></pre>
<p><strong>Security Considerations</strong>:</p>
<ul>
<li>Uses hardcoded key (not ideal for production)</li>
<li>Implements standard Triple DES algorithm</li>
<li>No initialization vector management</li>
<li>No key rotation mechanism</li>
</ul>
<h3>Test and Utility Files</h3>
<h4>test.java</h4>
<p><strong>Location</strong>: Root package</p>
<p><strong>Purpose</strong>: Simple test class for XML pattern matching.</p>
<p><strong>Implementation Details</strong>:</p>
<ul>
<li>Uses regex pattern to replace XML tags</li>
<li>Simple utility for development testing</li>
</ul>
<p><strong>Regex Pattern</strong>:</p>
<pre><code class="language-java">String strPattern = &quot;(&lt;)([a-zA-Z0-9:]+)(&gt;)(&lt;/)([a-zA-Z0-9:]+)(&gt;)&quot;;
</code></pre>
<h4>TeswtApp.java</h4>
<p><strong>Location</strong>: Root package</p>
<p><strong>Purpose</strong>: Test application for various file processing capabilities.</p>
<p><strong>Key Test Cases</strong>:</p>
<ul>
<li>File path/string token processing</li>
<li>String masking and formatting</li>
<li>File operations (reading, writing, conversion)</li>
<li>Image processing tests</li>
<li>Base64 encoding/decoding</li>
</ul>
<p><strong>Implementation Details</strong>:</p>
<ul>
<li>Contains multiple main methods for different test scenarios</li>
<li>Includes commented-out test cases for various features</li>
<li>Demonstrates file I/O, string manipulation, and error handling</li>
</ul>
<p><strong>String Masking Example</strong>:</p>
<pre><code class="language-java">public static String maskNumber(String number, String mask) {
    int index = 0;
    StringBuilder masked = new StringBuilder();
    for (int i = 0; i &lt; mask.length(); i++) {
        char c = mask.charAt(i);
        if (c == &#39;#&#39;) {
            masked.append(number.charAt(index));
            index++;
        } else if (c == &#39;x&#39;) {
            masked.append(c);
            index++;
        } else {
            masked.append(c);
        }
    }
    return masked.toString();
}
</code></pre>
<h4>TestFileProcess.java</h4>
<p><strong>Location</strong>: <code>src</code></p>
<p><strong>Purpose</strong>: Comprehensive test suite for the file processing framework.</p>
<p><strong>Key Test Methods</strong>:</p>
<ul>
<li><code>testFullFlow()</code>: Tests end-to-end file processing workflow</li>
<li><code>testChecksum()</code>: Tests checksum validation functionality</li>
<li><code>testChecksumAndCrypto()</code>: Tests combined checksum and encryption</li>
<li><code>testReConChecksum()</code>: Tests reconciliation checksum validation</li>
<li><code>testgetfeedConfig()</code>: Tests feed configuration retrieval</li>
</ul>
<p><strong>Test Workflow</strong>:</p>
<ol>
<li>Set up test objects (MessageMasterVO, FileMasterVO, FeedConfigVO)</li>
<li>Configure test parameters</li>
<li>Call processing methods</li>
<li>Verify results</li>
</ol>
<p><strong>Sample Test Method</strong>:</p>
<pre><code class="language-java">public static void testFullFlow() {
    try {
        FileProcess fp = new FileProcess();
        fp.process(
                &quot;hdr_Tran_Id=BILLREG_XLS_IN~*hdr_Status=NULL~*FEED|BILLREG29052019001|BILLREG29052019001|BILLREG_XLS_IN|S|PDG11_BILLREG_IN_1605201900001.xls|/usr1/SIR11784/GTB_HOME/INTERFACE_HOME/BILLREG_XLS_IN/incoming/||003&quot;,
                &quot;I&quot;);
    } catch (Exception e) {
        e.printStackTrace();
    }
}
</code></pre>
<h3>Integration Components</h3>
<h4>InwardMsgRedirect.java, OutGoingsRedirect.java, etc.</h4>
<p><strong>Location</strong>: <code>com.intellect.interfaces</code></p>
<p><strong>Purpose</strong>: Handle specific types of message redirections.</p>
<p><strong>Implementation Details</strong>:</p>
<ul>
<li>Extend <code>FileProcessAbstract</code> for consistent processing framework</li>
<li>Implement specific business logic for each message type</li>
<li>Maintain consistent error handling and status updates</li>
</ul>
<p><strong>Common Structure</strong>:</p>
<pre><code class="language-java">public class InwardMsgRedirect extends FileProcessAbstract {
    @Override
    public boolean process(MessageMasterVO messageMasterVO,
            FileMasterVO fileMasterVO, FeedConfigVO feedConfigVO)
            throws FileProcessException {
        // Message-specific processing logic
        // ...
    }
}
</code></pre>
<h4>EFTRTGSUpdate.java, EFTRTGSInsert.java</h4>
<p><strong>Location</strong>: <code>com.intellect.interfaces</code></p>
<p><strong>Purpose</strong>: Handle Electronic Funds Transfer and Real-Time Gross Settlement operations.</p>
<p><strong>Key Functionality</strong>:</p>
<ul>
<li>Database operations specific to EFT/RTGS transactions</li>
<li>Status updates and tracking</li>
<li>Error handling and reporting</li>
<li>Transaction processing</li>
</ul>
<p><strong>Business Logic</strong>:</p>
<ul>
<li>Payment status updates</li>
<li>Transaction logging</li>
<li>Status file generation</li>
<li>Notification processing</li>
</ul>
<h3>Validation Framework</h3>
<h4>FileValidationInterface.java</h4>
<p><strong>Location</strong>: <code>com.intellect.interfaces.file</code></p>
<p><strong>Purpose</strong>: Interface defining the contract for file validation.</p>
<p><strong>Key Methods</strong>:</p>
<ul>
<li><code>validateFile()</code>: Validates file structure and content</li>
<li><code>isFileExist()</code>: Checks file existence</li>
<li><code>validateFileName()</code>: Validates file naming conventions</li>
</ul>
<h4>FileValidationFatory.java</h4>
<p><strong>Location</strong>: <code>com.intellect.interfaces.file</code></p>
<p><strong>Purpose</strong>: Factory class for creating file validation implementations.</p>
<p><strong>Factory Pattern Implementation</strong>:</p>
<ul>
<li>Creates appropriate validator based on file type</li>
<li>Supports extensibility for new file types</li>
<li>Centralizes validator creation logic</li>
</ul>
<h4>MessageValidationInterface.java</h4>
<p><strong>Location</strong>: <code>com.intellect.interfaces.message</code></p>
<p><strong>Purpose</strong>: Interface for message validation.</p>
<p><strong>Validation Types</strong>:</p>
<ul>
<li>Format validation</li>
<li>Content validation</li>
<li>Business rule validation</li>
<li>Reference validation</li>
</ul>
<h3>Common Constants and Error Codes</h3>
<h4>FileProcessConstants.java</h4>
<p><strong>Location</strong>: <code>com.intellect.interfaces.common</code></p>
<p><strong>Purpose</strong>: Constants used throughout the file processing system.</p>
<p><strong>Key Constants</strong>:</p>
<ul>
<li>File status codes</li>
<li>Delimiters</li>
<li>Process flags</li>
<li>Configuration keys</li>
</ul>
<h4>FileProcessErrorConstants.java</h4>
<p><strong>Location</strong>: <code>com.intellect.interfaces.common</code></p>
<p><strong>Purpose</strong>: Error codes and messages for the system.</p>
<p><strong>Error Categories</strong>:</p>
<ul>
<li>File validation errors</li>
<li>Database errors</li>
<li>Processing errors</li>
<li>Configuration errors</li>
<li>Security errors</li>
</ul>
<h2>Common Scenarios and Solutions</h2>
<p>This section provides step-by-step guides for common scenarios that you might encounter when working with the Messaging Hub Financial Integration System.</p>
<h3>Scenario 1: Adding a New Feed Type</h3>
<p>If you need to add support for a new feed type, follow these steps:</p>
<ol>
<li><p><strong>Database Configuration</strong>:</p>
<ul>
<li>Add a new record to the <code>feed_config</code> table with appropriate configurations</li>
</ul>
<pre><code class="language-sql">INSERT INTO feed_config (feed_name, feed_type, dir_path, file_name_validation_reqd, file_name_regex)
VALUES (&#39;NEW_FEED_TYPE&#39;, &#39;I&#39;, &#39;/path/to/feed/directory&#39;, &#39;Y&#39;, &#39;^NEW_FEED_[0-9]{8}[0-9]{6}\.txt$&#39;);
</code></pre>
</li>
<li><p><strong>Implementation Class</strong>:</p>
<ul>
<li>Create a new class extending <code>FileProcessAbstract</code></li>
</ul>
<pre><code class="language-java">package com.intellect.interfaces;

public class NewFeedProcessor extends FileProcessAbstract {
    @Override
    public boolean process(MessageMasterVO messageMasterVO, FileMasterVO fileMasterVO, FeedConfigVO feedConfigVO) 
            throws FileProcessException {
        // Implementation specific to the new feed type
        // ...
        return true;
    }
}
</code></pre>
</li>
<li><p><strong>Factory Registration</strong>:</p>
<ul>
<li>Register the new processor in <code>FileProcessFatory.java</code></li>
</ul>
<pre><code class="language-java">static {
    // Add this line to the static initializer
    fileProcessorMap.put(&quot;NEW_FEED_TYPE&quot;, new NewFeedProcessor());
}
</code></pre>
</li>
<li><p><strong>Validation Rules</strong>:</p>
<ul>
<li>Implement any specific validation rules for the new feed type</li>
<li>Consider file format, checksums, and specific business rules</li>
</ul>
</li>
<li><p><strong>Testing</strong>:</p>
<ul>
<li>Create test cases in <code>TestFileProcess.java</code> to verify the implementation</li>
</ul>
<pre><code class="language-java">public static void testNewFeedType() {
    try {
        FileProcess fp = new FileProcess();
        fp.process(&quot;hdr_Tran_Id=NEW_FEED_TYPE~*hdr_Status=NULL~*FEED|REF123||NEW_FEED_TYPE||NEW_FEED_20231015120000.txt|/path/to/file/|&quot;, &quot;I&quot;);
    } catch (Exception e) {
        e.printStackTrace();
    }
}
</code></pre>
</li>
</ol>
<h3>Scenario 2: Troubleshooting Checksum Validation Issues</h3>
<p>When a file fails checksum validation, follow these steps to diagnose and resolve the issue:</p>
<ol>
<li><p><strong>Verify Checksum Configuration</strong>:</p>
<ul>
<li>Check the feed configuration in the database</li>
</ul>
<pre><code class="language-sql">SELECT feed_name, check_sum_validation_reqd, check_sum_algoritham, check_sum_avalible 
FROM feed_config WHERE feed_name = &#39;YOUR_FEED_NAME&#39;;
</code></pre>
</li>
<li><p><strong>Examine the Problematic File</strong>:</p>
<ul>
<li>Open the file and verify the checksum format matches the expected location</li>
<li>For <code>LAST_LINE_WITH_PREFIX</code>, ensure the last line follows the format: <code>CHECKSUM|&lt;hash_value&gt;</code></li>
<li>For <code>FIRST_LINE_OF_HDRFILE</code>, ensure the first line contains only the checksum</li>
</ul>
</li>
<li><p><strong>Recreate the Checksum</strong>:</p>
<ul>
<li>Use the same algorithm (MD5, SHA-1, etc.) to generate a checksum for the file excluding the checksum line</li>
<li>Compare this with the checksum in the file</li>
</ul>
</li>
<li><p><strong>Test with the Utility Method</strong>:</p>
<pre><code class="language-java">FileCheckSumUtil util = new FileCheckSumUtil();
boolean isValid = util.generateOrValidateCheckSum(fileName, filePath, &quot;MD5&quot;, &quot;CHECKSUM|&quot;, true);
System.out.println(&quot;Checksum validation result: &quot; + isValid);
</code></pre>
</li>
<li><p><strong>Common Issues and Resolutions</strong>:</p>
<ul>
<li><strong>Line endings</strong>: Different systems use different line endings (CR, LF, CRLF). Ensure the checksum algorithm accounts for this.</li>
<li><strong>Encoding</strong>: Files with different encodings may produce different checksums. Use consistent encoding.</li>
<li><strong>Hidden characters</strong>: Some files may contain hidden characters. Use a hex editor to verify.</li>
</ul>
</li>
</ol>
<h3>Scenario 3: Implementing a Custom XML Parser for a New Response Format</h3>
<p>When you need to parse a new XML format, follow these guidelines:</p>
<ol>
<li><p><strong>Analyze the XML Structure</strong>:</p>
<ul>
<li>Identify the key elements and their relationships</li>
<li>Determine parent-child hierarchies</li>
<li>Map XML elements to Java objects</li>
</ul>
</li>
<li><p><strong>Create Value Objects</strong>:</p>
<ul>
<li>Define Java classes to represent the XML data</li>
</ul>
<pre><code class="language-java">public class NewResponseVO {
    private String responseId;
    private String status;
    private List&lt;DetailVO&gt; details;
    // Getters and setters
}
</code></pre>
</li>
<li><p><strong>Implement the Parser</strong>:</p>
<pre><code class="language-java">public NewResponseVO parseXML(String xmlStr) throws Exception {
    NewResponseVO response = new NewResponseVO();
    Document d = getXMLDocument(xmlStr);
    
    // Extract main elements
    NodeList statusNodes = d.getElementsByTagName(&quot;Status&quot;);
    if (statusNodes.getLength() &gt; 0) {
        response.setStatus(statusNodes.item(0).getChildNodes().item(0).getNodeValue());
    }
    
    // Extract details
    NodeList detailNodes = d.getElementsByTagName(&quot;Detail&quot;);
    List&lt;DetailVO&gt; details = new ArrayList&lt;&gt;();
    for (int i = 0; i &lt; detailNodes.getLength(); i++) {
        DetailVO detail = new DetailVO();
        Node detailNode = detailNodes.item(i);
        NodeList childNodes = detailNode.getChildNodes();
        
        // Process child nodes
        for (int j = 0; j &lt; childNodes.getLength(); j++) {
            Node childNode = childNodes.item(j);
            String nodeName = childNode.getNodeName();
            
            if (nodeName.equals(&quot;Id&quot;)) {
                detail.setId(childNode.getChildNodes().item(0).getNodeValue());
            } else if (nodeName.equals(&quot;Value&quot;)) {
                detail.setValue(childNode.getChildNodes().item(0).getNodeValue());
            }
        }
        
        details.add(detail);
    }
    
    response.setDetails(details);
    return response;
}
</code></pre>
</li>
<li><p><strong>Handle Namespaces Properly</strong>:</p>
<ul>
<li>XML namespaces can complicate parsing</li>
<li>Consider using namespace-aware parsing</li>
</ul>
<pre><code class="language-java">Document getNamespaceAwareDocument(String xmlStr) throws Exception {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setNamespaceAware(true);
    DocumentBuilder builder = factory.newDocumentBuilder();
    return builder.parse(new InputSource(new StringReader(xmlStr)));
}
</code></pre>
</li>
<li><p><strong>Error Handling</strong>:</p>
<ul>
<li>Implement robust error handling for malformed XML</li>
<li>Validate the XML against a schema if available</li>
<li>Log parsing errors with context for debugging</li>
</ul>
</li>
</ol>
<h2>Troubleshooting Guide</h2>
<p>This section provides solutions to common issues that may occur in the Messaging Hub Financial Integration System.</p>
<h3>Database Connection Issues</h3>
<p><strong>Symptom</strong>: <code>FileProcessException</code> with error code 998 (SQL Exception)</p>
<p><strong>Possible Causes</strong>:</p>
<ol>
<li>Database server is unavailable</li>
<li>Connection pool exhaustion</li>
<li>Invalid credentials</li>
<li>Network connectivity problems</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Verify database server status: <code>ping &lt;database_host&gt;</code></li>
<li>Check connection pool settings in configuration</li>
<li>Verify credentials in connection properties</li>
<li>Check network connectivity and firewall settings</li>
<li>Review database logs for connection rejection reasons</li>
</ol>
<p><strong>Example Debug Steps</strong>:</p>
<pre><code class="language-java">// Add this code temporarily to diagnose connection issues
try {
    Connection con = DriverManager.getConnection(url, username, password);
    System.out.println(&quot;Connection test successful&quot;);
    con.close();
} catch (SQLException e) {
    System.out.println(&quot;Connection error: &quot; + e.getMessage());
    e.printStackTrace();
}
</code></pre>
<h3>File Not Found Errors</h3>
<p><strong>Symptom</strong>: <code>FileProcessException</code> with message &quot;File not found&quot; or error code 103</p>
<p><strong>Possible Causes</strong>:</p>
<ol>
<li>Incorrect file path in message</li>
<li>Directory permissions issues</li>
<li>File was moved or deleted before processing</li>
<li>Network mount issues for remote files</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Verify the file path using absolute paths: <code>new File(filePath).getAbsolutePath()</code></li>
<li>Check directory permissions: <code>ls -la &lt;directory&gt;</code></li>
<li>Add file existence logging before processing</li>
<li>Implement retry logic for intermittent network issues</li>
<li>Use <code>FileProcessUtil.isFileExist()</code> method which includes detailed logging</li>
</ol>
<p><strong>Code Example to Validate File Path</strong>:</p>
<pre><code class="language-java">File file = new File(fileMasterVO.getDirName() + File.separator + fileMasterVO.getFileName());
LOG.debug(&quot;Checking file existence: &quot; + file.getAbsolutePath());
if (!file.exists()) {
    LOG.error(&quot;File does not exist: &quot; + file.getAbsolutePath());
    throw new FileProcessException(&quot;File not found: &quot; + file.getAbsolutePath(), 
            FileProcessErrorConstants.ERROR_CODE_FILE_NOT_FOUND);
}
</code></pre>
<h3>Checksum Validation Failures</h3>
<p><strong>Symptom</strong>: <code>FileProcessException</code> with error code 104 (Checksum Validation Failed)</p>
<p><strong>Possible Causes</strong>:</p>
<ol>
<li>File was corrupted during transmission</li>
<li>Checksum algorithm mismatch</li>
<li>Incorrect checksum location configuration</li>
<li>Line ending differences between systems</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Re-generate the checksum using the same algorithm and compare</li>
<li>Verify the checksum algorithm in feed configuration</li>
<li>Check the file format and line endings</li>
<li>Enable debug logging for checksum validation</li>
<li>Test with <code>FileCheckSumUtil.generateOrValidateCheckSum()</code> directly</li>
</ol>
<p><strong>Debugging Steps</strong>:</p>
<pre><code>1. Extract the checksum from the file manually
2. Generate a checksum for the file using the same algorithm (e.g., MD5)
3. Compare the two values
4. Check for whitespace or line ending differences
5. Verify the checksum location configuration
</code></pre>
<h3>XML Parsing Errors</h3>
<p><strong>Symptom</strong>: <code>SAXException</code> or other parsing exceptions</p>
<p><strong>Possible Causes</strong>:</p>
<ol>
<li>Malformed XML</li>
<li>XML not well-formed</li>
<li>Incorrect namespace handling</li>
<li>Character encoding issues</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Validate the XML with an external validator</li>
<li>Check for special characters and proper escaping</li>
<li>Verify XML namespaces are handled correctly</li>
<li>Check character encoding (UTF-8, ISO-8859-1, etc.)</li>
<li>Use a more robust parser like JAXB for complex XML</li>
</ol>
<p><strong>XML Validation Example</strong>:</p>
<pre><code class="language-java">// Add this code to validate XML before parsing
try {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setValidating(true);
    DocumentBuilder builder = factory.newDocumentBuilder();
    builder.setErrorHandler(new ErrorHandler() {
        public void warning(SAXParseException e) throws SAXException {
            System.out.println(&quot;Warning: &quot; + e.getMessage());
        }
        public void error(SAXParseException e) throws SAXException {
            System.out.println(&quot;Error: &quot; + e.getMessage());
            throw e;
        }
        public void fatalError(SAXParseException e) throws SAXException {
            System.out.println(&quot;Fatal error: &quot; + e.getMessage());
            throw e;
        }
    });
    builder.parse(new InputSource(new StringReader(xmlStr)));
    System.out.println(&quot;XML is valid&quot;);
} catch (Exception e) {
    System.out.println(&quot;XML validation failed: &quot; + e.getMessage());
}
</code></pre>
<h3>Encryption/Decryption Failures</h3>
<p><strong>Symptom</strong>: <code>Exception</code> during encrypt/decrypt operations</p>
<p><strong>Possible Causes</strong>:</p>
<ol>
<li>Key mismatch</li>
<li>Algorithm implementation differences</li>
<li>Padding issues</li>
<li>Corrupted encrypted data</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Verify the encryption key is correct</li>
<li>Check the encryption algorithm and mode</li>
<li>Ensure consistent padding mechanism</li>
<li>Verify the format of encrypted data</li>
<li>Test encryption/decryption with known good values</li>
</ol>
<p><strong>Debug Example</strong>:</p>
<pre><code class="language-java">// Test encryption/decryption with a known value
TripleDES des = new TripleDES();
String original = &quot;TestString123&quot;;
String encrypted = des.encrypt(original);
String decrypted = des.decrypt(encrypted);
System.out.println(&quot;Original: &quot; + original);
System.out.println(&quot;Encrypted: &quot; + encrypted);
System.out.println(&quot;Decrypted: &quot; + decrypted);
System.out.println(&quot;Roundtrip successful: &quot; + original.equals(decrypted));
</code></pre>
<h2>Developer Quick Reference</h2>
<p>This section provides quick reference examples for common development tasks in the Messaging Hub Financial Integration System.</p>
<h3>Creating a New File Processor</h3>
<pre><code class="language-java">// 1. Create a new class extending FileProcessAbstract
public class CustomFeedProcessor extends FileProcessAbstract {
    private static final FileProcessLogger LOG = FileProcessLogger.getLogger(CustomFeedProcessor.class.getName());
    
    @Override
    public boolean process(MessageMasterVO messageMasterVO, FileMasterVO fileMasterVO, 
                         FeedConfigVO feedConfigVO) throws FileProcessException {
        LOG.debug(&quot;Starting process for: &quot; + fileMasterVO.getFileName());
        
        try {
            // 1. Read the file
            String filePath = fileMasterVO.getDirName() + File.separator + fileMasterVO.getFileName();
            List&lt;String&gt; lines = Files.readAllLines(Paths.get(filePath));
            
            // 2. Process each line
            int totalRecords = 0;
            int successRecords = 0;
            
            for (String line : lines) {
                totalRecords++;
                // Custom processing logic
                // ...
                successRecords++;
            }
            
            // 3. Update statistics
            fileMasterVO.setTotalRecords(String.valueOf(totalRecords));
            fileMasterVO.setSuccessRecords(String.valueOf(successRecords));
            fileMasterVO.setFileProcessStatus(FileProcessConstants.FILE_PROCESSED);
            
            // 4. Update database
            FileProcessDAO dao = new FileProcessDAO();
            dao.updateFileMasterStatus(messageMasterVO, fileMasterVO);
            
            return true;
        } catch (Exception e) {
            LOG.error(&quot;Error processing file: &quot; + fileMasterVO.getFileName(), e);
            throw new FileProcessException(&quot;Error processing file: &quot; + e.getMessage(), 
                    FileProcessErrorConstants.EXCEPTION_CODE, e);
        }
    }
}

// 2. Register in the factory
// Add in FileProcessFatory.java static initializer
fileProcessorMap.put(&quot;CUSTOM_FEED&quot;, new CustomFeedProcessor());
</code></pre>
<h3>Working with the Graph Data Structure</h3>
<pre><code class="language-java">// Creating a graph structure for hierarchical data
Graph graph = new Graph();

// Add parent nodes
Node root = graph.getNode(&quot;ROOT&quot;);
root.setId(&quot;ROOT&quot;);

// Add child nodes
Node child1 = graph.getNode(&quot;CHILD1&quot;);
child1.setId(&quot;CHILD1&quot;);
child1.setParent(&quot;ROOT&quot;);
root.addAdjacentNodes(child1);

Node child2 = graph.getNode(&quot;CHILD2&quot;);
child2.setId(&quot;CHILD2&quot;);
child2.setParent(&quot;ROOT&quot;);
root.addAdjacentNodes(child2);

// Add grandchild nodes
Node grandchild1 = graph.getNode(&quot;GRANDCHILD1&quot;);
grandchild1.setId(&quot;GRANDCHILD1&quot;);
grandchild1.setParent(&quot;CHILD1&quot;);
child1.addAdjacentNodes(grandchild1);

// Traverse the graph
graph.breadthFirstTraversal(root);

// Custom traversal with data processing
Queue&lt;Node&gt; q = new LinkedList&lt;&gt;();
q.add(root);
root.setVisted(true);
while(!q.isEmpty()) {
    Node n = q.poll();
    
    // Process node data
    System.out.println(&quot;Processing node: &quot; + n.getId());
    
    // Add child nodes to queue
    for(Node adj : n.adjacentNodes) {
        if(!adj.isVisted()) {
            adj.setVisted(true);
            q.add(adj);
        }
    }
}
</code></pre>
<h3>XML Processing Best Practices</h3>
<pre><code class="language-java">// 1. Parse XML safely
private Document parseXML(String xmlStr) throws Exception {
    try {
        StringReader sreader = new StringReader(xmlStr);
        InputSource is = new InputSource(sreader);
        DOMParser parser = new DOMParser();
        parser.setFeature(&quot;http://apache.org/xml/features/validation/dynamic&quot;, true);
        parser.setFeature(&quot;http://apache.org/xml/features/dom/include-ignorable-whitespace&quot;, false);
        parser.parse(is);
        return parser.getDocument();
    } catch (Exception e) {
        LOG.error(&quot;Error parsing XML: &quot; + e.getMessage());
        // Log a truncated version of the XML for debugging
        LOG.error(&quot;XML content (truncated): &quot; + 
                xmlStr.substring(0, Math.min(xmlStr.length(), 500)));
        throw e;
    }
}

// 2. Extract values safely
private String getNodeValue(Document doc, String tagName) {
    NodeList nodeList = doc.getElementsByTagName(tagName);
    if (nodeList != null &amp;&amp; nodeList.getLength() &gt; 0) {
        Node node = nodeList.item(0);
        if (node.hasChildNodes() &amp;&amp; node.getFirstChild().getNodeType() == Node.TEXT_NODE) {
            return node.getFirstChild().getNodeValue();
        }
    }
    return null;
}

// 3. Handle namespaces correctly
private NodeList getNodesByTagNameAndNamespace(Document doc, String namespace, String tagName) {
    Element root = doc.getDocumentElement();
    return root.getElementsByTagNameNS(namespace, tagName);
}

// 4. Traverse complex structures
private void processChildElements(Node parentNode, Map&lt;String, String&gt; resultMap, String prefix) {
    NodeList childNodes = parentNode.getChildNodes();
    for (int i = 0; i &lt; childNodes.getLength(); i++) {
        Node childNode = childNodes.item(i);
        if (childNode.getNodeType() == Node.ELEMENT_NODE) {
            String nodeName = childNode.getNodeName();
            if (childNode.hasChildNodes() &amp;&amp; childNode.getFirstChild().getNodeType() == Node.TEXT_NODE) {
                resultMap.put(prefix + &quot;.&quot; + nodeName, childNode.getFirstChild().getNodeValue());
            } else if (childNode.hasChildNodes()) {
                processChildElements(childNode, resultMap, prefix + &quot;.&quot; + nodeName);
            }
        }
    }
}
</code></pre>
<h3>Database Operations Reference</h3>
<pre><code class="language-java">// 1. Getting a connection
Connection conn = null;
try {
    FileProcessConnection fpConnection = FileProcessConnection.getInstance();
    conn = fpConnection.getConnection();
    // Use the connection
    // ...
} finally {
    if (conn != null) {
        try {
            conn.close();
        } catch (SQLException e) {
            LOG.error(&quot;Error closing connection&quot;, e);
        }
    }
}

// 2. Executing a query with parameters
PreparedStatement pstmt = null;
ResultSet rs = null;
try {
    pstmt = conn.prepareStatement(&quot;SELECT * FROM feed_config WHERE feed_name = ?&quot;);
    pstmt.setString(1, feedName);
    rs = pstmt.executeQuery();
    
    while (rs.next()) {
        // Process results
        String dirPath = rs.getString(&quot;dir_path&quot;);
        String checkSumReqd = rs.getString(&quot;check_sum_validation_reqd&quot;);
        // ...
    }
} finally {
    if (rs != null) {
        try { rs.close(); } catch (SQLException e) { /* ignore */ }
    }
    if (pstmt != null) {
        try { pstmt.close(); } catch (SQLException e) { /* ignore */ }
    }
}

// 3. Executing an update
PreparedStatement updateStmt = null;
try {
    updateStmt = conn.prepareStatement(
        &quot;UPDATE file_master SET file_process_status = ?, updated_dt = SYSDATE &quot; +
        &quot;WHERE bank_reference_id = ?&quot;);
    updateStmt.setString(1, FileProcessConstants.FILE_PROCESSED);
    updateStmt.setString(2, bankReferenceId);
    
    int rowsUpdated = updateStmt.executeUpdate();
    LOG.debug(&quot;Rows updated: &quot; + rowsUpdated);
} finally {
    if (updateStmt != null) {
        try { updateStmt.close(); } catch (SQLException e) { /* ignore */ }
    }
}

// 4. Transaction handling
conn.setAutoCommit(false);
try {
    // Execute multiple statements
    // ...
    
    // Commit if everything succeeds
    conn.commit();
} catch (Exception e) {
    // Rollback on error
    try {
        conn.rollback();
    } catch (SQLException ex) {
        LOG.error(&quot;Error rolling back transaction&quot;, ex);
    }
    throw e;
} finally {
    // Reset auto-commit
    try {
        conn.setAutoCommit(true);
    } catch (SQLException e) {
        LOG.error(&quot;Error resetting auto-commit&quot;, e);
    }
}
</code></pre>
<h3>Error Handling Best Practices</h3>
<pre><code class="language-java">// 1. Proper exception hierarchy
try {
    // Business logic
} catch (FileNotFoundException e) {
    // Specific handling for file not found
    LOG.error(&quot;File not found: &quot; + filePath, e);
    throw new FileProcessException(&quot;File not found: &quot; + filePath, 
            FileProcessErrorConstants.ERROR_CODE_FILE_NOT_FOUND, e);
} catch (SQLException e) {
    // Specific handling for SQL errors
    LOG.error(&quot;Database error: &quot; + e.getMessage(), e);
    throw new FileProcessException(&quot;Database error: &quot; + e.getMessage(), 
            FileProcessErrorConstants.ERROR_CODE_SQL, e);
} catch (Exception e) {
    // General exception handling
    LOG.error(&quot;Unexpected error: &quot; + e.getMessage(), e);
    throw new FileProcessException(&quot;Unexpected error: &quot; + e.getMessage(), 
            FileProcessErrorConstants.EXCEPTION_CODE, e);
}

// 2. Maintaining context in exceptions
try {
    // Complex operation
} catch (Exception e) {
    LOG.error(&quot;Error processing file: &quot; + fileMasterVO.getFileName() + 
            &quot;, feed: &quot; + fileMasterVO.getFeedName() + &quot;, line: &quot; + lineNumber, e);
    
    // Update error status in database
    fileMasterVO.setErrMsg(e.getMessage());
    fileMasterVO.setErrCode(String.valueOf(FileProcessErrorConstants.EXCEPTION_CODE));
    fileMasterVO.setFileProcessStatus(FileProcessConstants.FILE_FILEREJECTED);
    
    try {
        FileProcessDAO dao = new FileProcessDAO();
        dao.updateFileMasterStatus(messageMasterVO, fileMasterVO);
    } catch (Exception ex) {
        LOG.error(&quot;Error updating error status in database&quot;, ex);
    }
    
    throw new FileProcessException(&quot;Error processing file: &quot; + e.getMessage(), 
            FileProcessErrorConstants.EXCEPTION_CODE, e);
}

// 3. Proper cleanup in finally blocks
FileInputStream fis = null;
try {
    fis = new FileInputStream(file);
    // Process file
} catch (Exception e) {
    // Handle exception
} finally {
    if (fis != null) {
        try {
            fis.close();
        } catch (IOException e) {
            LOG.error(&quot;Error closing file&quot;, e);
        }
    }
}
</code></pre>
<h2>Appendices</h2>
<h3>Appendix A: Message Format Specifications</h3>
<h4>Incoming Message Format</h4>
<p>Standard format for incoming messages:</p>
<pre><code>hdr_Tran_Id=&lt;FEED_NAME&gt;~*hdr_Status=NULL~*FEED|&lt;REFERENCE&gt;||&lt;FEED_NAME&gt;||&lt;FILE_NAME&gt;|&lt;DIRECTORY&gt;|
</code></pre>
<p>Example:</p>
<pre><code>hdr_Tran_Id=BILLREG_XLS_IN~*hdr_Status=NULL~*FEED|BILLREG29052019001|BILLREG29052019001|BILLREG_XLS_IN|S|PDG11_BILLREG_IN_1605201900001.xls|/usr1/SIR11784/GTB_HOME/INTERFACE_HOME/BILLREG_XLS_IN/incoming/||003
</code></pre>
<h4>Limit Data Format</h4>
<p>Format for limit data response:</p>
<pre><code>Facility_id=&lt;ID&gt;~*GCIF=&lt;CIF&gt;~*Limit_Type=&lt;TYPE&gt;~*LimitCurrency=&lt;CURRENCY&gt;~*ProductCat=&lt;CATEGORY&gt;~*ProductName=&lt;NAME&gt;~*SancLimiAmount=&lt;AMOUNT&gt;~*UtilizedAmt=&lt;UTILIZED&gt;~*LimitStartDate=&lt;START&gt;~*LimitEndDate=&lt;END&gt;~*~*
</code></pre>
<h3>Appendix B: Database Schema</h3>
<h4>message_master Table</h4>
<pre><code class="language-sql">CREATE TABLE message_master (
    msg_ref_id VARCHAR2(50) PRIMARY KEY,
    msg_txt CLOB,
    flow CHAR(1),
    feed_name VARCHAR2(50),
    file_name VARCHAR2(100),
    dir_name VARCHAR2(200),
    process_status VARCHAR2(10),
    created_dt TIMESTAMP,
    updated_dt TIMESTAMP
);
</code></pre>
<h4>file_master Table</h4>
<pre><code class="language-sql">CREATE TABLE file_master (
    bank_reference_id VARCHAR2(50) PRIMARY KEY,
    feed_name VARCHAR2(50),
    file_name VARCHAR2(100),
    dir_name VARCHAR2(200),
    process_status VARCHAR2(10),
    file_process_status VARCHAR2(10),
    total_records NUMBER,
    success_records NUMBER,
    failed_records NUMBER,
    err_code VARCHAR2(10),
    err_msg VARCHAR2(4000),
    created_dt TIMESTAMP,
    updated_dt TIMESTAMP
);
</code></pre>
<h4>LIMIT_TREE_RESPONSE Table</h4>
<pre><code class="language-sql">CREATE TABLE LIMIT_TREE_RESPONSE (
    CIF VARCHAR2(50),
    EXP_DATE DATE,
    START_DATE DATE,
    FACILITY_ID VARCHAR2(50),
    LIMIT_AMOUNT VARCHAR2(50),
    UTILIZED_AMOUNT VARCHAR2(50),
    LABEL VARCHAR2(100),
    PARENT_ID VARCHAR2(50),
    CURRENT_ID VARCHAR2(50),
    REF_NO VARCHAR2(50)
);
</code></pre>
<h3>Appendix C: Common Error Codes</h3>
<table>
<thead>
<tr>
<th>Error Code</th>
<th>Description</th>
<th>Solution</th>
</tr>
</thead>
<tbody><tr>
<td>100</td>
<td>Message Empty</td>
<td>Ensure message is not empty</td>
</tr>
<tr>
<td>101</td>
<td>Message Format Error</td>
<td>Check message format against specifications</td>
</tr>
<tr>
<td>102</td>
<td>Feed Maintenance Error</td>
<td>Verify feed configuration in database</td>
</tr>
<tr>
<td>103</td>
<td>File Not Found</td>
<td>Ensure file exists in specified location</td>
</tr>
<tr>
<td>104</td>
<td>Checksum Validation Failed</td>
<td>Verify file integrity</td>
</tr>
<tr>
<td>105</td>
<td>Decryption Failed</td>
<td>Check encryption keys and algorithms</td>
</tr>
<tr>
<td>998</td>
<td>SQL Exception</td>
<td>Check database connectivity and queries</td>
</tr>
<tr>
<td>999</td>
<td>General Exception</td>
<td>Check logs for detailed error information</td>
</tr>
</tbody></table>
<h3>Appendix D: Glossary</h3>
<ul>
<li><strong>CIF</strong>: Customer Information File - A unique identifier for a bank customer</li>
<li><strong>EFT</strong>: Electronic Funds Transfer</li>
<li><strong>NEFT</strong>: National Electronic Funds Transfer</li>
<li><strong>RTGS</strong>: Real-Time Gross Settlement</li>
<li><strong>Feed</strong>: A specific data exchange channel between systems</li>
<li><strong>Checksum</strong>: A value used to verify data integrity</li>
<li><strong>Triple DES</strong>: A symmetric-key block cipher that applies the DES cipher algorithm three times to each data block</li>
</ul>
</div> <!-- Navigation buttons for blog posts --> <div class="blog-navigation" data-astro-cid-7jjqptxk> <div class="blog-nav-buttons" data-astro-cid-7jjqptxk> <a href="/blog/life-lessons" class="nav-button prev-button" data-nav="prev" data-astro-cid-7jjqptxk>
Previous
</a> <span class="nav-button-placeholder" data-astro-cid-7jjqptxk></span> </div> </div> </div> </div> </div> </div>  </div> <!-- Window statusbar with proper structure to match original --> <div class="window-statusbar"> <div>Read my thoughts on cybersecurity and technology</div> </div> </div> </div> <!-- Theme switcher component - position fixed in bottom right --> <div class="theme-switch-wrapper"> <label class="theme-switch" for="theme-checkbox" title="Toggle Theme"> <input type="checkbox" id="theme-checkbox"> </label> <span class="theme-switch-label" id="theme-status">Light</span> </div> <!-- Font preload --> <div class="font_preload"> <span class="font-msserif"></span> <span class="font-millennium"></span> <span class="font-millenniumbold"></span> <span class="font-terminal"></span> <span class="font-gastromond"></span> </div> <!-- Core scripts --> <script src="/scripts/main.js"></script> <script src="/scripts/components.js"></script> <!-- Page specific scripts -->     <script src="/scripts/blog-loader.js"></script>  <!-- Page initialize script (handles transitions and sizing) --> <script>
    // Immediate initialization script to ensure proper layout
    (function() {
      // Simple check for home vs content page
      const isHome = window.location.pathname === '/' || 
                     window.location.pathname === '/index' || 
                     window.location.pathname === '/index.html';
      
      // Apply appropriate classes based on page type
      const portfolioWindow = document.querySelector('.portfolio-window');
      if (portfolioWindow) {
        if (!isHome) {
          // Content page should be full screen
          document.body.classList.add('content-page');
          portfolioWindow.classList.add('content-page-window');
        } else {
          // Home page should be windowed
          document.body.classList.remove('content-page');
          portfolioWindow.classList.remove('content-page-window');
        }
      }
    })();
  </script> <!-- Astro transition handler script --> <script>
      // This script ensures titlebar and transitions are properly initialized
      document.addEventListener('DOMContentLoaded', function() {
        // Try to initialize titlebar after a small delay to ensure all components are loaded
        setTimeout(function() {
          if (typeof setupTitlebarTriggers === 'function') {
            setupTitlebarTriggers();
          }
        }, 100);
      });
    </script> <!-- Theme script --> <script>
    document.addEventListener('DOMContentLoaded', function() {
      const themeCheckbox = document.getElementById('theme-checkbox');
      const themeLabel = document.getElementById('theme-status');
      
      if (!themeCheckbox || !themeLabel) return;
      
      // Set initial checkbox state based on current theme
      const isDarkTheme = document.documentElement.classList.contains('dark-theme');
      themeCheckbox.checked = isDarkTheme;
      themeLabel.textContent = isDarkTheme ? 'Dark' : 'Light';
      
      // Add first-visit class if it's the user's first visit (for animation)
      if (localStorage.getItem('theme-visited') !== 'true') {
        document.querySelector('.theme-switch')?.classList.add('first-visit');
        localStorage.setItem('theme-visited', 'true');
      }
      
      // Handle theme switch change
      themeCheckbox.addEventListener('change', function() {
        const darkMode = this.checked;
        
        // Update theme class on root element
        if (darkMode) {
          document.documentElement.classList.add('dark-theme');
        } else {
          document.documentElement.classList.remove('dark-theme');
        }
        
        // Update label text
        themeLabel.textContent = darkMode ? 'Dark' : 'Light';
        
        // Store preference
        localStorage.setItem('theme', darkMode ? 'dark' : 'light');
      });
    });
  </script> </body> </html>  